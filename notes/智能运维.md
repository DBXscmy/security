# 读书笔记-智能运维


> 这是一篇笔记，内容源自：裴丹 张圣林 裴昶华 中国计算机学会通信 第13卷 第12期 2017年12月

当前社会很多方面都依赖复杂的IT系统，包括：互联网、物联网、云计算、电力、金融、军工、航天等。复杂系统的部署、运行和维护都需要专业的运维人员，以应对各种突发情况，确保系统安全、可靠地运行。由于各类突发事件产生海量数据，因此，智能运维从本质上可以认为是一个大数据分析的具体场景。

![智能运维涉及的范围](images\201906\智能运维涉及的范围.png)

## 智能运维的历史

### 手工运维

早期的运维人员，被称为系统管理员、网管。负责的工作包括：

- 监控产品运行状态和性能指标
- 产品上线
- 变更服务

运维人员工作量和人数是随着产品或服务的用户规模呈线性增长的。

### 自动化运维

一些常见的、重复性的工作可以通过自动化脚本来实现：
- 一些脚本可以用于监控分布式系统，产生大量日志；
- 人工重复调用和自动触发相结合，防止人工误操作，减少人力成本，提高效率。

自动化运维可以认为是基于行业领域知识和运维场景领域知识的专家系统。

### 运维开发一体化

传统模式将运维人员从产品开发人员中抽离出来，成立单独团队，这一模式使得不同公司能够分享自动化运维的工具和想法，相互借鉴；但是也产生了问题，即产生了两个对立团队：产品研发人员和运维人员。

他们的使命一开始就不同：
- 研发人员的目标是使产品尽快形成新功能、部署，使用户尽快使用新功能；
- 运维人员则希望尽可能少出现问题和故障。

大部分问题，都是由配置变更或软件升级导致的，所以运维人员本能的排斥产品开发人员部署配置变更或软件升级。他们的冲突，降低了系统整体效率。另外，运维人员不了解产品细节，所以不能很好的定位问题。

为解决这一矛盾，DevOps应运而生。最核心的概念是开发运维一体化，不再硬性区分开发人员和运维人员。
- 开发人员自己在代码中设置监控点，产生监控数据。
- 系统部署和运行过程中发生的异常由开发人员进行定位和分析。

DevOps优势明显：
- 能够产生更加有效的监控数据，方面后期运维；
- 运维和开发是一体，出现问题能够快速找出问题根源。

### 智能运维（AIOps）

自动化运维提升了运维效率，DevOps提升了研发和运维的配合效率，但整个IT规模的急剧增长，服务的复杂多样，“人定规则”专家系统变得力不从心。简单的、基于人为制定规则的方法并不能够解决大规模运维的问题。

智能运维强调由机器学习算法自动地从海量运维数据（包括事件本身，以及运维人员地人工处理日志）中不断地学习，不断地提炼规则。

![智能运维与自动化运维区别](images\201906\智能运维与自动化运维区别.png)

## 智能运维现状

### 关键场景与技术

涉及大型分布式系统监控、分析、决策等。

![智能运维地关键场景和技术](images\201906\智能运维地关键场景和技术.png)

**针对历史事件的AIops**

- 瓶颈分析：分析制约互联网服务性能地硬件或软件瓶颈
- 热点分析：找到对于某项指标（如处理服务请求规模、出错日志）显著大于处于类似属性空间内其它设施地集群、网络设备、服务器等设施。
- KPI曲线聚类：指对形状类似地曲线进行聚类；
- KPI曲线关联挖掘：针对两条曲线地变换趋势进行关联关系挖掘。
- KPI曲线与报警之间的关联挖掘是针对一条KPI曲线地变化趋势与某种异常之间地关联关系进行挖掘。
- 异常事件关联挖掘：指的是对异常事件之间进行关联关系挖掘。
- 全链路模块调用链分析：分析软件模块间地调用关系。
- 故障传播关系图构建：融合了上述后四种技术，推断出异常事件之间地故障传播关系，并作为故障根因分析地基础，解决微服务时代KPI异常之间的故障传播关系不断变化，而无法通过先验知识静态设定的问题。

通过以上技术，智能运维能够准确地复现并诊断历史事件。

**针对当前事件的AIOps**

- KPI异常检测：是指通过分析KPI曲线，发现互联网服务的软硬件中的异常行为分析，如访问延迟增大、网络设备故障、访问用户急剧减少等。
- 异常定位：在KPI被检测出异常之后被触发，在多维属性空间中快速定位导致异常的属性组合。
- 快速止损：指对以往常见故障引发的异常报警建立“指纹”系统，用于快速比对新发生故障时的指纹，从而判断故障类型以便快速止损。
